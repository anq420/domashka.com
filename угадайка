from random import randint
import sys


def igra():
    while True:
        min_count = int(input('Введите минимальное число, которого будут загадываться числа (не меньше 5): '))
        max_count = int(input('Введите максимальное число, до которого будут загадываться числа (не больше 30): '))
        if min_count >= 5 < max_count <= 30:
            break
        else:
            print('Введите значения заново')
    
    def making_digits():
        spisok = set()
        while len(spisok) < 3:
            a = randint (min_count, max_count)
            spisok.add(a)
        print (f'Я загадал кое-какие числа {spisok}. Угадаешь какие?') #вывожу здесь список для проверки того, что "загадывает" комп - можно выбросить строку
        return spisok
    
    def users_digits():
        spisok = set()
        for i in range(3):
            a = input('Введите число: ')
            if a == 'exit':
                sys.exit()
            else:
                spisok.add(int(a))
        print (f'Вы загадали эти числа: {spisok}') #также вывожу список того, что загадывает юзер, чтобы убедиться, что всё работает как нужно - можно выбросить строку
        return spisok
    
    def proverka():
        machines_digits = making_digits()
        while True:
            common_digits = set(users_digits()).intersection(set(machines_digits))
            if len(common_digits) == 3:
                print('Вы победили')
                break
            elif len(common_digits) == 0:
                print('Вы ничего не угадали')
            else:
                print(f'Вы проиграли, но угадали {len(common_digits)} число(а)')
        return f'Загаданные мной числа - {common_digits}' #просто так вывожу список "загаданных" компом чисел, чтобы не возвращалось None

    return proverka()

print(igra())
